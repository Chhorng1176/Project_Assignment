<!-- Sidebar -->
<ul class="navbar-nav sidebar accordion"
    id="accordionSidebar"
    style="background:#ffffff;border-right:1px solid #e5e7eb;">

    <!-- ===============================
         BRAND / LOGO
    =============================== -->
    <a class="sidebar-brand d-flex align-items-center justify-content-center py-4"
       href="{{ url_for('main.index') }}"
       style="text-decoration:none;">
        <img src="{{ url_for('static', filename='img/logo.jpg') }}"
             alt="Agri Logo"
             style="height:36px;width:auto;">
        <span class="ml-2 font-weight-bold"
              style="color:#1f2937;font-size:16px;">
            Agri System
        </span>
    </a>

    <!-- ===============================
         ADMIN
    =============================== -->
    {% if current_user.is_authenticated and current_user.has_permission("view_dashboard") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.dashboard') }}">
            <img src="{{ url_for('static', filename='img/logo/dashboard-48.png') }}" class="menu-icon">
            <span>Dashboard</span>
        </a>
    </li>
    {% endif %}

    {% if current_user.is_authenticated and current_user.has_permission("view_reports") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.expert_statistics') }}">
            <img src="{{ url_for('static', filename='img/logo/Expert Statistics.png') }}" class="menu-icon">
            <span>Expert Statistics</span>
        </a>
    </li>
    {% endif %}

    {% if current_user.is_authenticated and current_user.has_permission("view_dashboard") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.audit_logs') }}">
            <img src="{{ url_for('static', filename='img/logo/Audit Logs.png') }}" class="menu-icon">
            <span>Audit Logs</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         ADMINISTRATION
    =============================== -->
    {% if current_user.is_authenticated and current_user.has_permission("manage_users") %}
    <div class="sidebar-heading mt-3">Administration</div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.users') }}">
            <img src="{{ url_for('static', filename='img/logo/Users.png') }}" class="menu-icon">
            <span>Users</span>
        </a>
    </li>
    {% endif %}

    {% if current_user.is_authenticated and current_user.has_permission("manage_roles") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.roles') }}">
            <img src="{{ url_for('static', filename='img/logo/Roles & Permissions.png') }}" class="menu-icon">
            <span>Roles & Permissions</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         EXPERT
    =============================== -->
    {% if current_user.is_authenticated and current_user.has_role("expert") %}
    <div class="sidebar-heading mt-3">Expert</div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('expert.dashboard') }}">
            <img src="{{ url_for('static', filename='img/logo/pending-diagnoses.png') }}" class="menu-icon">
            <span>Diagnoses</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('expert.farmer_chats') }}">
            <img src="{{ url_for('static', filename='img/logo/chat-messages.png') }}" class="menu-icon">
            <span>Farmer Chats</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         FARMER
    =============================== -->
    {% if current_user.is_authenticated and current_user.has_role("farmer") %}
    <div class="sidebar-heading mt-3">Farmer</div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.dashboard') }}">
            <img src="{{ url_for('static', filename='img/logo/dashboard-48.png') }}" class="menu-icon">
            <span>Dashboard</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.diagnose') }}">
            <img src="{{ url_for('static', filename='img/logo/total-diagnoses.png') }}" class="menu-icon">
            <span>New Diagnosis</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.chat') }}">
            <img src="{{ url_for('static', filename='img/logo/chat-messages.png') }}" class="menu-icon">
            <span>Ask Expert</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         LOGOUT
    =============================== -->
    {% if current_user.is_authenticated %}
    <li class="nav-item mt-3">
        <a class="nav-link text-danger" href="{{ url_for('auth.logout') }}">
            <img src="{{ url_for('static', filename='img/logo/Logout.png') }}" class="menu-icon">
            <span>Logout</span>
        </a>
    </li>
    {% endif %}

</ul>
<!-- End Sidebar -->
