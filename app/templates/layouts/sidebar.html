<!-- Sidebar -->
<ul class="navbar-nav bg-gradient-success sidebar sidebar-dark accordion"
    id="accordionSidebar">

    <!-- ===============================
         BRAND
    =============================== -->
    <a class="sidebar-brand d-flex align-items-center justify-content-center"
       href="{{ url_for('main.index') }}">
        <div class="sidebar-brand-icon">
            <i class="fas fa-leaf"></i>
        </div>
        <div class="sidebar-brand-text mx-3">
            Agri System
        </div>
    </a>

    <hr class="sidebar-divider my-0">

    <!-- ===============================
         ADMIN DASHBOARD
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_permission("view_dashboard") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.dashboard') }}">
            <i class="fas fa-fw fa-tachometer-alt"></i>
            <span>Admin Dashboard</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         ADMIN REPORTS
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_permission("view_reports") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.expert_statistics') }}">
            <i class="fas fa-fw fa-chart-line"></i>
            <span>Expert Statistics</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         ADMIN AUDIT LOGS
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_permission("view_dashboard") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.audit_logs') }}">
            <i class="fas fa-fw fa-clipboard-list"></i>
            <span>Audit Logs</span>
        </a>
    </li>
    {% endif %}

    <hr class="sidebar-divider">

    <!-- ===============================
         ADMINISTRATION
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_permission("manage_users") %}
    <div class="sidebar-heading">
        Administration
    </div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.users') }}">
            <i class="fas fa-fw fa-users"></i>
            <span>Users</span>
        </a>
    </li>
    {% endif %}

    {% if current_user.is_authenticated
          and current_user.has_permission("manage_roles") %}
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.roles') }}">
            <i class="fas fa-fw fa-user-shield"></i>
            <span>Roles & Permissions</span>
        </a>
    </li>
    {% endif %}

    <!-- ===============================
         ğŸŒ± CROP & DISEASE (ADMIN)
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_permission("manage_crops") %}
    <div class="sidebar-heading">
        Crop Management
    </div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.crops') }}">
            <i class="fas fa-fw fa-seedling"></i>
            <span>Crops</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.diseases') }}">
            <i class="fas fa-fw fa-bug"></i>
            <span>Diseases</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('admin.rules') }}">
            <i class="fas fa-fw fa-brain"></i>
            <span>Rule Engine</span>
        </a>
    </li>
    {% endif %}

    <hr class="sidebar-divider">

    <!-- ===============================
         EXPERT SYSTEM
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_role("expert") %}
    <div class="sidebar-heading">
        Expert
    </div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('expert.dashboard') }}">
            <i class="fas fa-fw fa-notes-medical"></i>
            <span>Pending Diagnoses</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('expert.farmer_chats') }}">
            <i class="fas fa-fw fa-comments"></i>
            <span>Farmer Chats</span>
        </a>
    </li>
    {% endif %}

    <hr class="sidebar-divider">

    <!-- ===============================
         FARMER SYSTEM
    =============================== -->
    {% if current_user.is_authenticated
          and current_user.has_role("farmer") %}
    <div class="sidebar-heading">
        Farmer
    </div>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.dashboard') }}">
            <i class="fas fa-fw fa-tractor"></i>
            <span>My Diagnoses</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.diagnose') }}">
            <i class="fas fa-fw fa-stethoscope"></i>
            <span>New Diagnosis</span>
        </a>
    </li>

    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('farmer.chat') }}">
            <i class="fas fa-fw fa-comments"></i>
            <span>Ask Expert</span>
        </a>
    </li>
    {% endif %}

    <hr class="sidebar-divider d-none d-md-block">

    <!-- ===============================
         LOGOUT
    =============================== -->
    {% if current_user.is_authenticated %}
    <li class="nav-item">
        <a class="nav-link text-danger" href="{{ url_for('auth.logout') }}">
            <i class="fas fa-fw fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </li>
    {% endif %}

    <!-- Sidebar Toggler -->
    <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0"
                id="sidebarToggle"></button>
    </div>

</ul>
<!-- End of Sidebar -->
